"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.streamToString = void 0;
const streamToString = (stream) => {
    const chunks = [];
    return new Promise((resolve, reject) => {
        const handleData = (chunk) => chunks.push(chunk);
        const handleError = (error) => {
            stream.off('data', handleData);
            stream.off('end', handleEnd);
            reject(error);
        };
        const handleEnd = () => {
            stream.off('data', handleData);
            stream.off('error', handleError);
            resolve(chunks.join(''));
        };
        stream.on('data', handleData);
        stream.once('error', handleError);
        stream.once('end', handleEnd);
        stream.resume();
    });
};
exports.streamToString = streamToString;
