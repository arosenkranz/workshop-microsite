"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.createMockContext = void 0;
const stream_1 = require("stream");
const createMockContext = () => {
    const buffer = {
        stderr: [],
        stdout: [],
    };
    const stderr = new stream_1.Writable({
        write(chunk, encoding, callback) {
            buffer.stderr.push(chunk);
            callback();
        },
    });
    const stdout = new stream_1.Writable({
        write(chunk, encoding, callback) {
            buffer.stdout.push(chunk);
            callback();
        },
    });
    const stdin = new stream_1.Readable();
    Object.assign(stderr, { toString: () => buffer.stderr.join('') });
    Object.assign(stdout, { toString: () => buffer.stdout.join('') });
    return {
        stderr,
        stdin,
        stdout,
    };
};
exports.createMockContext = createMockContext;
